# Linux指令

## 用户管理

### 用户账号添加

**useradd [选项] 用户名**

- -d 指定用户登陆的目录
- -c 指定账户的备注目录
- -e 指定账号的有效期限
- -f 缓冲天数，密码过期在指定天数后关闭该账号
- -g 指定用户所属组
- -G 指定用户所属的附加用户组
- -m 自动建立用户的登陆目录
- -r 创建系统账户
- -s 指定用用户的登陆 shell
- -u 指定用户ID，若添加-o选项则用户ID可与其他用户重复

<!--可通过查看/etc/passwd文件，查看已存在的用户;创建账号的用户需有创建账号的权-->

### 设置用户密码

**passwd [选项] 用户名**

- -l 锁定密码，锁定后密码失效
- -d 删除密码，仅系统管理员可使用
- -S 列出密码的相关信息，仅系统管理员可使用
- -f 强制执行

<!--用户密码保存在文件/etc/shadow中-->

### 删除用户

**userdel [选项] 用户名**

- -f 强制删除用户，即使该用户为当前用户
- -r 删除用户的同时，删除与该用户相关的所有文件

### 修改用户信息

**usermod [选项] 用户名**

- -c 修改用户的备注信息
- -d 修改用户的登入目录
- -e 修改账户的有效期限
- -f 修改缓冲天数，即修改密码过期后关闭账户的时间
- -g 修改用户所属组
- -l 修改用户账户名称
- -L 修改用户密码，使密码失效
- -s 修改用户登陆后使用的shell
- -u 修改用户ID
- -U 解除密码锁定

### 添加用户组

**groupadd [选项] 用户名**

- -g 指定新建用户组的组ID
- -r 创建系统用户组，组ID取值范围为1~499
- -o 允许创建组ID已存在的用户组

### 删除用户组

**groupdel 参数**

### 修改用户组属性

**groupmod [选项] [用户组]**

- -g 为用户组指定新的组ID
- -n 修改用户组的组名
- -o 允许创建组ID存在的用户组

### 切换用户组

**newgrp 用户组名**

<!--当前用户-->

### 用户切换

**su - 用户名**

<!--以上 - 为一个选项，类似于-l 选项与用户名之间应有一个空格-->

<!--在命令行输入‘exit’或‘su -user’可退出目标用户-->

**sudo [选项] -u 用户 [命令]**

- -b 在后台执行命令
- -h 显示帮助
- -H 将HOME环境变量设置为新身份的HOME环境变量
- -k 结束密码的有效期限
- -l 列出目前用户可执行与无法执行的命令
- -p 该边询问密码的提示命令
- -s 执行制定的shell
- -u 以指定的用户作为新的身份，即切换到指定用户，默认切换到root用户

## 文件管理

### 文件操作

- pwd ：打印当前工作目录的绝对路经

- cd [参数] ：切换目录

  - ./public 以当前目录为相对路经
  - .. 切换工作路经到上一级目录
  - /etc/yum 切换到绝对路经yum中
  - ~ 切换到当前用户的根目录

- ls [选项] [参数] ：列出参数的属性信息

  - -l 以详细信息的形式展示出当前目录下的文件
  - -a 显示当前目录下的全部文件
  - -d 产看目录属性
  - -t 按创建时间顺序列出文件
  - -i 输出文件的inode编号
  - -R 列出当前目录下的所有文件信息,并以递归方式显示各个子目录中的文件和子目录信息

  <!--选项和参数都省略的情况下,ls默认打印当前路径下的文件名-->

  <!--.表示当前目录  ..表示上一级目录-->

  <!--使用ls -l 命令查看目录信息时，会得到目录文件数量统计和（：文件类型与权限、硬链接数、所有者、所有者所属组、所占空间、时间戳、文件名）-->

- touch 参数 ：更新已存在文件的时间标签，若文件不存在则新建文件

- mkdir [选项] 参数 :创建目录

  - -p 若路径中的目录不存在，则先创建目录
  - -v 查看文件创建过程

- copy [选项] 元文件或目录 目标目录 ：复制文件

  - -R 递归处理，将指定目录下的文件及子目录一并处理
  - -p 拷贝的同时不修改文件的属性，包括所有者、所属组、权限和时间
  - -f 强行复制文件或目录，无论目的文件或目录是否存在

- rm [选项] 文件或目录 ：删除目录中的文件或目录

  - -f 强制删除文件或目录
  - -rf 选项-r和-f的结合，删除目录中所有的文件和子目录，并且不一一确认
  - -i 在删除文件或目录时要对删除的内容逐一进行确认（y/n）

- mv 源文件或目录 目标目录 ：移动文件或目录

- rmdir [-p] 目录 ：删除目录

### 查看文件

- cat 文件名 ：打印文件内容到输出设备
- more 文件名 ：分页显示文件内容
  - f/Space 显示下一页
  - Enter 显示下一行
  - q/Q 退出
- less 文件名 ：分页显示文件内容，可实现向上翻页
  - PageUp 向上翻页
  - PageDown 向下翻页
  - q/Q 退出
- head -n 文件名 ：查看文件的前n行
- tail -n 文件名 : 查看文件的后n行
- wc [选项] 参数 ：计算文件的字节数、字数、列数
  - -l 行数
  - -c 列数

### 文件搜索

- which 命令 ：查看命令所在路径

- find 搜索路径 [选项] 搜索关键字 ： 借助搜索关键字查找文件或目录

  - -name 根据文件名查找
  - -size 根据文件大小查找
  - -user 根据文件所有者查找

- locate [选项] 搜索关键字 ：借助搜索关键字查找文件或目录

  <!--locate速度远超find，find搜索整个目录，locate搜索数据库/var/lib/locatedb,即便文件存在，数据中没有记录,locate便找不到-->

- grep 指定字符 源文件 ：在文件中搜索与字符串匹配的行并输出

### 权限管理

<!--rwx对应读写执行 用户分为uga对应拥有者、同组者、其他用户-->

- chmod {augo}{+-=} 文件或目录 ：变更文件或目录的权限
- chown 用户 文件或目录 ： 变更文件或目录的所有者
- chgrp 用户或组 文件 ：变更文件或目录的所有者或组

### 压缩解压

- tar [选项] 目录 ：打包多个目录或文件，通常与压缩命令一起使用
  - -c 产生.tar打包文件
  - -v 打包时显示详细信息
  - -f 指定压缩后的文件名
  - -z 打包，同时通过gaip指令压缩备份文件，压缩后的格式为.tar.gz
  - -x 从打包文件中还原文件
- zip [-r] [压缩后文件名称] 文件或目录 ：压缩文件，获得.zip压缩包，压缩后保存源文件
  - -j 只保留文件名称机器内容，不存放任何目录名称
  - -m 文件压缩完成后，删除原始文件
  - -o 以压缩文件内拥有最新更改时间的文件为准，更新压缩文件的更改时间
  - -r 当参数为目录时，递归处理目录下的所有文件和子目录
- unzip [选项] 压缩包包名 ：解压
  - -l 显示指定压缩包中包含的文件
  - -M 将输出结果送到more程序处理
  - -n 解压时不要覆盖原有文件
  - -o 命令执行后直接覆盖原有文件
  - -d 指定解压后文件要存放的目录
- gzip [选项] 文件 ：压缩文件，获得.gz格式的压缩包，压缩后不保存源文件，若同时列出多个文件，则每个文件会被单独压缩
- gunzip [选项] 压缩包包名
- bzip2 [选项] 文件或目录 ：压缩文件，获得.bz2格式的压缩包，使用选项-k时保留源文件
- bunzip2 [选项] 压缩包包名
- xz/unxz 同上

### 存储管理

- mkfs [选项] [参数] 分区 ：格式化

- mount [选项] [参数] 设备 挂载点 ：将某个分区挂载到目录
  - -t 指定待挂载设备的文件系统类型~
  - -o 用来描述设备的挂载方式~
- ~

### 进程管理

- ps [选项] [参数] ：查看当前系统中正在运行的进程
  - -a 显示当前终端机下的所有进程，包括其他用户启动的进程
  - -u 以用户的形式，显示系统中的进程
  - -x 忽略终端机，显示所有进程
  - -c 显示每个进程使用的环境变量
  - -r 只列出当前终端机中正在执行的进程
- top [选项] ：实时观察系统的整体运行情况，每个时间间隔刷新一次页面（系统性能检测工具）
  - -l 控制是否显示平均负载和启动时间
  - -t 控制是否显示进程统计信息和CPU状态信息
  - -m 控制是否显示内存信息
  - -M 根据常驻内存集RES大小为进程排序
  - -P 根据%CPU为进程排序
  - -T 根据TIME+为进程排序
  - -r 重置一个进程的优先级
  - -i 忽略闲置和僵死的进程
  - -k 终止一个进程
- pstree [选项] ：以树状图的形式显示系统
  - -a 显示每个进程的完整命令
  - -c 不适用精简标识法
  - -h 列出树状图，特别标明当前正在执行的进程
  - -u 显示用户名称
  - -n 使用程序识别码排序
- pgrep [选项] [参数] ：根据进程名从进程队列中查找进程，查找成功后默认显示进程的pid

![1555481345588](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555481345588.png)

- nice [选项] [参数]：设置系统中进程的nice值

  

![1555481441808](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555481441808.png)

- jobs [选项]  [参数] ：查看系统中的作业表及作业状态，进程编号从1开始

![1555481530095](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555481530095.png)

- bg 参数 ：将进程放入后台运行，使前台可以执行其他任务
- fg 作业号 ：将后台进程调往前台

- kill [选项] [参数] ：用来终结正在运行的进程，它的原理是发送某个信号到指定的进程已终止该进程
  - -9 无条件终止

## 服务管理

- systemctl 功能 服务名称 ：实际是service和chkconfig命令的组合

![1555481944934](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555481944934.png)

![1555481959240](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555481959240.png)

## 软件包管理

- rpm 命令

  ![1555482048102](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482048102.png)

- yum 命令

![1555482093286](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482093286.png)

- yum源 

![1555482209208](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482209208.png)

​	其中 base 源 

## VI编辑器

- 命令模式

  - 光标移动

    ![1555482328329](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482328329.png)![1555482337945](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482337945.png)

  - 复制和粘贴

    ![1555482365257](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482365257.png)

  - 删除

    ![1555482384683](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482384683.png)

  - 其他操作

  ![1555482431690](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482431690.png)

- 插入模式

- 底行模式

  ![1555482500281](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482500281.png)

![1555482510318](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482510318.png)

![1555482527678](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482527678.png)

- 模式转换

  ![1555482558095](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555482558095.png)

  

# Shell



### 环境变量

- PTAH ：用于帮助shell找到的用户所有输入的命令
- PWD和OLDPWD ：PWD记录当前系统目录；OLDPWD记录就有的工作目录
- HOME ：记录当前用户的根目录，用于保存用户自己的文件
- SHELL　：　保存shell 的值，默认的Shell的值/bin/bash
- USER和UID ：保存已登陆的用户的名字和ID
- PS1和PS2 ： 设置提示格式

### 引号

- 单引号：它可以屏蔽shell中元字符的功能
- 双引号：屏蔽，但不会屏蔽￥ 、 ‘’ 符号
- 反引号：命令替换，可与引号结合使用

### 通配符

- *：与零个或多个字符匹配
- ?：与任何单个字符匹配
- []：与[]中的任一字符相匹配
- [!]：与[]之外的任一字符匹配

### 连接符

- ;：命令会按照先后次序一次执行
- &&：其前后命令的执行遵行逻辑和关系，只有该连接符前面的命令执行成功后，他后买你的命令才被执行
- ||：其前后的执行遵循逻辑关系，只有该来连接符之前的命令执行失败时，才会执行后面的命令

### 文本处理工具

- grep [选项] [模式] [文件] ：文本查询

  ![1555483932482](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555483932482.png)

- sed [选项] ‘sd编辑命令’ 输入文件 ：一次读取一行内容进行处理，通过文件或管道将内容读取到模式空暗金进行处理，然后输出到屏幕

![1555484072656](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555484072656.png)

![1555484082872](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555484082872.png)

- awk [选项] pattern {action} 文件

  

![1555484163331](C:\Users\Qianyri\AppData\Roaming\Typora\typora-user-images\1555484163331.png)

